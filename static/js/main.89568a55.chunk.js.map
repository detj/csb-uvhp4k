{"version":3,"sources":["App.js","hooks.js","index.js"],"names":["App","useState","pkgname","setPkgname","flation","setFlation","loading","setLoading","error","setError","succeed","value","fail","msg","reset","useEffect","url","URL","fetch","response","json","pkg","semverflation","decimal","message","lookup","useSemverflation","metric","displayValue","setPkg","toLowerCase","trim","handleSubmit","useCallback","event","preventDefault","formData","FormData","target","Object","fromEntries","document","location","href","searchParams","get","className","onSubmit","onReset","delete","window","history","replaceState","toString","resetSearchParams","style","placeContent","display","gap","flexWrap","name","size","placeholder","defaultValue","type","secondary","inline","title","rootElement","getElementById","createRoot","render"],"mappings":"qOAOe,SAASA,IACtB,MAA8BC,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,ECN8B,SAACD,GAC/B,MAA8BD,mBAAS,MAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KACA,EAA8BJ,qBAA9B,mBAAOK,EAAP,KAAgBC,EAAhB,KACA,EAA0BN,mBAAS,MAAnC,mBAAOO,EAAP,KAAcC,EAAd,KAEA,SAASC,EAAQC,GACfF,EAAS,MACTJ,EAAWM,GACXJ,GAAW,GAGb,SAASK,EAAKC,GACZR,EAAW,MACXE,GAAW,GACXE,EAASI,GAGX,SAASC,IACPT,EAAW,MACXI,EAAS,MAkCX,OA/BAM,qBAAU,WAAM,sDACd,uGACOb,EADP,uBAEIY,IAFJ,iCAKEP,GAAW,GACXE,GAAS,GACHO,EAAM,IAAIC,IAAJ,qCAAsCf,IAPpD,kBAWqBgB,MAAMF,GAX3B,cAWIG,EAXJ,iBAYgBA,EAASC,OAZzB,QAYIC,EAZJ,gEAcIT,EAAK,2BAAD,OAA4BV,IAdpC,qCAmBIS,EAAQW,YAAcD,EAAK,CAAEE,QAAS,IAnB1C,0DAqBIX,GAAK,uCAAGY,UAAW,qCArBvB,2BAyBEd,EAAQC,GAzBV,mEADc,uBAAC,WAAD,wBA4Bdc,KACC,CAACvB,IAEG,CAACE,EAASE,EAASE,GD/COkB,CAAiBxB,GAAlD,mBAAOyB,EAAP,KAAerB,EAAf,KAAwBE,EAAxB,KACIoB,GAA2B,IAAZtB,EAAA,iBAAsCqB,EAEzD,SAASE,EAAOlB,IACdA,EAAQA,EAAMmB,cAAcC,SAE5B5B,EAAWQ,GAcb,IAAMqB,EAAeC,uBACnB,kBAAM,SAACC,GAEA,OAALA,QAAK,IAALA,KAAOC,iBACP,IAAMC,EAAW,IAAIC,SAASH,EAAMI,QAEpCT,EADcU,OAAOC,YAAYJ,GAA3Bf,QAGR,IAWF,OARAN,qBAAU,WACR,IACMM,EADM,IAAIJ,IAAIwB,SAASC,SAASC,MACtBC,aAAaC,IAAI,OAC7BxB,GACFQ,EAAOR,KAER,IAGD,sBAAKyB,UAAU,MAAf,UACE,+CACA,qFAEA,sBAAMC,SAAUf,IAAgBgB,QA7BpC,WACE7C,EAAW,IAPb,WACE,IAAMa,EAAM,IAAIC,IAAIwB,SAASC,SAASC,MACtC3B,EAAI4B,aAAaK,OAAO,OACxBC,OAAOC,QAAQC,aAAa,KAAM,GAAIpC,EAAIqC,YAK1CC,IA2BE,SACE,sBACEC,MAAO,CACLC,aAAc,SACdC,QAAS,OACTC,IAAK,OACLC,SAAU,QALd,UAQE,cAAC,IAAD,CACEC,KAAK,MACLC,KAAK,IACLC,YAAY,8BACZC,aAAc7D,GAAoB,OAEpC,cAAC,IAAD,CAAQ8D,KAAK,SAASH,KAAK,IAA3B,uBAGA,cAAC,IAAD,CAAQG,KAAK,QAAQH,KAAK,IAAII,WAAS,EAAvC,wBAKJ,6BAAKrC,IACJpB,GAAS,cAAC,IAAD,CAAM0D,QAAM,EAAC1D,OAAK,EAAC2D,MAAO3D,OExE1C,IAAM4D,EAAc3B,SAAS4B,eAAe,QAC/BC,qBAAWF,GAEnBG,OACH,cAAC,aAAD,UACE,cAACvE,EAAD,S","file":"static/js/main.89568a55.chunk.js","sourcesContent":["import \"./styles.css\";\nimport { useState, useEffect, useCallback } from \"react\";\nimport Button from \"@asphalt-react/button\";\nimport Textfield from \"@asphalt-react/textfield\";\nimport Flag from \"@asphalt-react/flag\";\nimport { useSemverflation } from \"./hooks.js\";\n\nexport default function App() {\n  const [pkgname, setPkgname] = useState(\"\");\n  const [metric, loading, error] = useSemverflation(pkgname);\n  let displayValue = loading === true ? `Calculating...` : metric;\n\n  function setPkg(value) {\n    value = value.toLowerCase().trim();\n    if (!value) return;\n    setPkgname(value);\n  }\n\n  function resetSearchParams() {\n    const url = new URL(document.location.href);\n    url.searchParams.delete(\"pkg\");\n    window.history.replaceState(null, \"\", url.toString());\n  }\n\n  function handleReset() {\n    setPkgname(\"\");\n    resetSearchParams();\n  }\n\n  const handleSubmit = useCallback(\n    () => (event) => {\n      // eslint-disable-next-line no-unused-expressions\n      event?.preventDefault();\n      const formData = new FormData(event.target);\n      let { pkg } = Object.fromEntries(formData);\n      setPkg(pkg);\n    },\n    []\n  );\n\n  useEffect(() => {\n    const url = new URL(document.location.href);\n    const pkg = url.searchParams.get(\"pkg\");\n    if (pkg) {\n      setPkg(pkg);\n    }\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <h1>semverflation</h1>\n      <h2>Calculate frequency of semver major bumps over time</h2>\n\n      <form onSubmit={handleSubmit()} onReset={handleReset}>\n        <div\n          style={{\n            placeContent: \"center\",\n            display: \"flex\",\n            gap: \"1rem\",\n            flexWrap: \"wrap\"\n          }}\n        >\n          <Textfield\n            name=\"pkg\"\n            size=\"l\"\n            placeholder=\"type name of an npm package\"\n            defaultValue={pkgname ? pkgname : null}\n          />\n          <Button type=\"submit\" size=\"l\">\n            Calculate\n          </Button>\n          <Button type=\"reset\" size=\"l\" secondary>\n            Reset\n          </Button>\n        </div>\n      </form>\n      <h2>{displayValue}</h2>\n      {error && <Flag inline error title={error} />}\n    </div>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport semverflation from \"semverflation\";\n\nexport const useSemverflation = (pkgname) => {\n  const [flation, setFlation] = useState(null);\n  const [loading, setLoading] = useState();\n  const [error, setError] = useState(null);\n\n  function succeed(value) {\n    setError(null);\n    setFlation(value);\n    setLoading(false);\n  }\n\n  function fail(msg) {\n    setFlation(null);\n    setLoading(false);\n    setError(msg);\n  }\n\n  function reset() {\n    setFlation(null);\n    setError(null);\n  }\n\n  useEffect(() => {\n    async function lookup() {\n      if (!pkgname) {\n        reset();\n        return;\n      }\n      setLoading(true);\n      setError(false);\n      const url = new URL(`https://registry.npmjs.org/${pkgname}`);\n      let response, pkg, value;\n\n      try {\n        response = await fetch(url);\n        pkg = await response.json();\n      } catch {\n        fail(`failed to fetch package ${pkgname}`);\n        return;\n      }\n\n      try {\n        value = semverflation(pkg, { decimal: 2 });\n      } catch (e) {\n        fail(e?.message || \"Failed to determine semverflation\");\n        return;\n      }\n\n      succeed(value);\n    }\n    lookup();\n  }, [pkgname]);\n\n  return [flation, loading, error];\n};\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement);\n\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n"],"sourceRoot":""}